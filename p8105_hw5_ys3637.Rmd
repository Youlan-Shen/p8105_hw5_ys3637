---
title: "p8105_hw5_ys3637"
author: "Youlan Shen"
date: "2022-11-16"
output: github_document
---
## Set up

```{r}
# library all packages that we need at the beginning
library(tidyverse)
library(ggridges)
library(patchwork)

# default set up
theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Problem 2

```{r}
# read in data from CSV file
homicide_data <- read_csv("Data/Problem_2_data/homicide-data.csv")
# show the first several lines of the original data
homicide_data
```

This dataset contains `r nrow(homicide_data)` rows and `r ncol(homicide_data)` columns, while each row showing a homicide case in 50 large U.S. cities over the past decade. Variables include uid (the case id), reported_date(date the case reported), victim_last, victim_first (victim last and first name), victim_age, victim_sex, city, state, lat (latitude), lon (longitude), and disposition (if the case is closed or open, or closed with arrest or not). There are total `r nrow(homicide_data)` cases, with each row describing case date, location, victim information, and disposition information.

* Then, to create a city_state variable, and summarize within cities to obtain the total number of homicides and the number of unsolved homicides.

```{r}
# Create a city_state variable
homicide_data <- homicide_data %>% 
  janitor::clean_names() %>% 
  mutate(city_state = str_c(city, ", ", state))
# show it
homicide_data %>% 
  select(uid, city, state, city_state)
# summarize
homicide_data %>% 
  mutate(unsolved = ifelse(disposition == "Closed by arrest", FALSE, TRUE)) %>% 
  group_by(city_state) %>% 
  summarize(n_homicides = n(),
            n_unsolved = sum(unsolved))
```

